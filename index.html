<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Hiragana & Katakana Quiz</title>
  <style>
    html, body { height: 100%; margin: 0; }
    body {
      font-family: Arial;
      text-align: center;
      background-color: #f5f5f5;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      box-sizing: border-box;
      min-height: 100vh;
      min-height: calc(var(--vh, 1vh) * 100);
      flex-direction: column;
    }
    input { font-size: 18px; padding: 8px; border: 2px solid #ccc; border-radius: 5px; width: 90%; max-width: 300px; }
    button { font-size: 18px; padding: 8px 15px; margin: 5px; border: none; border-radius: 5px; background-color: #4792d9; color: white; cursor: pointer; }
    button:hover { background-color: #3b7fb8; }
    #feedback { margin-top: 20px; font-weight: bold; font-size: 20px; height: 30px; }
    #stats { margin-top: 20px; font-size: 18px; color: #333; }
  </style>
</head>
<body>
  <h1>Hiragana & Katakana Quiz</h1>
  
  <p id="hiragana" style="font-size: 60px;"></p>
  <p id="feedback"></p>
  
  <input type="text" id="answer" placeholder="Escribe romaji">

  <div style="margin-top:15px; font-size:14px;">
    <label><input type="checkbox" id="simpleH" checked> Hiragana simples</label><br>
    <label><input type="checkbox" id="complexH"> Hiragana complejos</label><br>
    <label><input type="checkbox" id="katakana"> Katakana</label>
  </div>

  <button onclick="checkAnswer()">Enviar</button>
  <button onclick="resetQuiz()">Empezar de nuevo</button>

  <p id="stats">Aciertos: 0 | Errores: 0</p>

  <script>
    const hiraganaSimple = {
      'あ':'a','い':'i','う':'u','え':'e','お':'o',
      'か':'ka','き':'ki','く':'ku','け':'ke','こ':'ko',
      'が':'ga','ぎ':'gi','ぐ':'gu','げ':'ge','ご':'go',
      'さ':'sa','し':'shi','す':'su','せ':'se','そ':'so',
      'ざ':'za','じ':'ji','ず':'zu','ぜ':'ze','ぞ':'zo',
      'た':'ta','ち':'chi','つ':'tsu','て':'te','と':'to',
      'だ':'da','で':'de','ど':'do',
      'な':'na','に':'ni','ぬ':'nu','ね':'ne','の':'no',
      'は':'ha','ひ':'hi','ふ':'fu','へ':'he','ほ':'ho',
      'ば':'ba','び':'bi','ぶ':'bu','べ':'be','ぼ':'bo',
      'ぱ':'pa','ぴ':'pi','ぷ':'pu','ぺ':'pe','ぽ':'po',
      'ま':'ma','み':'mi','む':'mu','め':'me','も':'mo',
      'や':'ya','ゆ':'yu','よ':'yo',
      'ら':'ra','り':'ri','る':'ru','れ':'re','ろ':'ro',
      'わ':'wa','を':'wo','ん':'n'
    };

    const hiraganaComplex = {
      'きゃ':'kya','きゅ':'kyu','きょ':'kyo',
      'ぎゃ':'gya','ぎゅ':'gyu','ぎょ':'gyo',
      'しゃ':'sha','しゅ':'shu','しょ':'sho',
      'じゃ':'ja','じゅ':'ju','じょ':'jo',
      'ちゃ':'cha','ちゅ':'chu','ちょ':'cho',
      'にゃ':'nya','にゅ':'nyu','にょ':'nyo',
      'ひゃ':'hya','ひゅ':'hyu','ひょ':'hyo',
      'びゃ':'bya','びゅ':'byu','びょ':'byo',
      'ぴゃ':'pya','ぴゅ':'pyu','ぴょ':'pyo',
      'みゃ':'mya','みゅ':'myu','みょ':'myo',
      'りゃ':'rya','りゅ':'ryu','りょ':'ryo'
    };

    const katakana = {
      'ア':'a','イ':'i','ウ':'u','エ':'e','オ':'o',
      'カ':'ka','キ':'ki','ク':'ku','ケ':'ke','コ':'ko',
      'ガ':'ga','ギ':'gi','グ':'gu','ゲ':'ge','ゴ':'go',
      'サ':'sa','シ':'shi','ス':'su','セ':'se','ソ':'so',
      'ザ':'za','ジ':'ji','ズ':'zu','ゼ':'ze','ゾ':'zo',
      'タ':'ta','チ':'chi','ツ':'tsu','テ':'te','ト':'to',
      'ダ':'da','デ':'de','ド':'do',
      'ナ':'na','ニ':'ni','ヌ':'nu','ネ':'ne','ノ':'no',
      'ハ':'ha','ヒ':'hi','フ':'fu','ヘ':'he','ホ':'ho',
      'バ':'ba','ビ':'bi','ブ':'bu','ベ':'be','ボ':'bo',
      'パ':'pa','ピ':'pi','プ':'pu','ペ':'pe','ポ':'po',
      'マ':'ma','ミ':'mi','ム':'mu','メ':'me','モ':'mo',
      'ヤ':'ya','ユ':'yu','ヨ':'yo',
      'ラ':'ra','リ':'ri','ル':'ru','レ':'re','ロ':'ro',
      'ワ':'wa','ヲ':'wo','ン':'n'
    };

    let pool = {}; 
    let currentChar = '';
    let correct = 0;
    let wrong = 0;

    function updatePool() {
      pool = {};
      if(document.getElementById('simpleH').checked) Object.assign(pool, hiraganaSimple);
      if(document.getElementById('complexH').checked) Object.assign(pool, hiraganaComplex);
      if(document.getElementById('katakana').checked) Object.assign(pool, katakana);
    }

    function randomChar() {
      updatePool();
      const keys = Object.keys(pool);
      if(keys.length === 0) return;
      currentChar = keys[Math.floor(Math.random() * keys.length)];
      document.getElementById('hiragana').innerText = currentChar;
      document.getElementById('answer').value = '';
      document.getElementById('feedback').innerText = '';
    }

    function checkAnswer() {
      const ans = document.getElementById('answer').value.trim().toLowerCase();
      if(!ans) {
        document.getElementById('feedback').innerText = '⚠️ Escribe algo';
        return;
      }
      if(ans === pool[currentChar]) {
        document.getElementById('feedback').innerText = '✅ Correcto!';
        correct++;
      } else {
        document.getElementById('feedback').innerText = `❌ Incorrecto. Era "${pool[currentChar]}"`;
        wrong++;
      }
      updateStats();
      setTimeout(randomChar, 800);
    }

    document.getElementById('answer').addEventListener('keydown', e => {
      if(e.key === 'Enter') checkAnswer();
    });

    function updateStats() {
      document.getElementById('stats').innerText = `Aciertos: ${correct} | Errores: ${wrong}`;
    }

    function resetQuiz() {
      correct = 0;
      wrong = 0;
      updateStats();
      randomChar();
    }

    function setVh() {
      document.documentElement.style.setProperty('--vh', (window.innerHeight * 0.01) + 'px');
    }

    setVh();
    window.addEventListener('resize', setVh);

    randomChar();
  </script>
</body>
</html>

